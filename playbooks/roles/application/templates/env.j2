#
# Django config environment variables
# Allowed variables are listed in {{ django_dir }}/project/settings/environment.py
#

export DJANGO_APP_ENV='dev'
export DJANGO_JSON_DATABASES='{"default":{"ENGINE":"{{ application_db_engine }}","NAME": "{{ application_db_name }}","USER": "{{ application_db_user }}","PASSWORD": "{{ application_db_password }}"}}'
export DJANGO_JSON_DEBUG=true
export DJANGO_JSON_TEMPLATE_DEBUG=true
export DJANGO_SECRET_KEY='{{ django_secret_key }}'

{% if 'cacheservers' in group_names %}
export DJANGO_JSON_CACHES='{"default":{"BACKEND":"redis_cache.RedisCache","LOCATION":"{{ groups.get("cacheservers")[0] }}:{{ redis_port }}", "OPTIONS": { "DB": "{{ redis_id }}", "PARSER_CLASS": "redis.connection.HiredisParser"} } }'

export DJANGO_SESSION_ENGINE='redis_sessions.session'
export DJANGO_SESSION_REDIS_HOST='{{ groups.get("cacheservers")[0] }}'
export DJANGO_SESSION_REDIS_PORT='{{ redis_port }}'
export DJANGO_SESSION_REDIS_DB='{{ redis_id }}'
export DJANGO_SESSION_REDIS_PASSWORD='{{ redis_password }}'
export DJANGO_SESSION_REDIS_PREFIX='{{ application_name }}'
{% else %}
export DJANGO_JSON_CACHES='{"default":{"BACKEND":"redis_cache.RedisCache","LOCATION":"127.0.0.1:{{ redis_port }}", "OPTIONS": { "DB": "{{ redis_id }}", "PARSER_CLASS": "redis.connection.HiredisParser"} } }'

export DJANGO_SESSION_ENGINE='redis_sessions.session'
export DJANGO_SESSION_REDIS_HOST='127.0.0.1'
export DJANGO_SESSION_REDIS_PORT='{{ redis_port }}'
export DJANGO_SESSION_REDIS_DB='{{ redis_id }}'
export DJANGO_SESSION_REDIS_PASSWORD='{{ redis_password }}'
export DJANGO_SESSION_REDIS_PREFIX='{{ application_name }}'
{% endif %}
